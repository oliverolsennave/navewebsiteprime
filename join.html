<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join — Nave</title>
    <meta name="description" content="Join Nave and add your Catholic organization to the map.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Favicon (red Nave logo, cache-busted) -->
    <link rel="icon" href="/favicon.ico?v=20260209-red" sizes="48x48">
    <link rel="icon" href="assets/favicon-32.png?v=20260209-red" sizes="32x32" type="image/png">
    <link rel="icon" href="assets/favicon-16.png?v=20260209-red" sizes="16x16" type="image/png">
    <link rel="icon" href="assets/favicon-adaptive.svg?v=20260209-red" type="image/svg+xml" sizes="any">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png?v=20260209-red" sizes="180x180">
    <link rel="mask-icon" href="assets/favicon-adaptive.svg?v=20260209-red" color="#CC3333">
    <link rel="shortcut icon" href="/favicon.ico?v=20260209-red">
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#0D0D10">
</head>
<body class="join-page">
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="assets/whitenavelogo.png" alt="Nave" class="logo-img">
                <span class="logo-text">Nave</span>
            </a>
            <div class="nav-links" id="nav-links">
                <a href="map.html" class="nav-link">Map</a>
                <a href="engage.html" class="nav-link">Engage</a>
                <a href="ask-gabe.html" class="nav-link">Ask</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="join.html" class="nav-cta">Try Nave Free</a>
            </div>
            <button class="nav-hamburger" id="nav-hamburger" aria-label="Menu" onclick="document.getElementById('nav-links').classList.toggle('open');document.getElementById('nav-backdrop').classList.toggle('visible');">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
        </div>
    </nav>
    <div class="nav-backdrop" id="nav-backdrop" onclick="document.getElementById('nav-links').classList.remove('open');this.classList.remove('visible');"></div>
    <script>requestAnimationFrame(()=>document.getElementById('nav-links').classList.add('ready'));</script>

    <main class="join-wrapper">
        <section class="join-hero">
            <img src="assets/whitenavelogo.png" alt="Nave" class="join-hero-logo">
            <h1>Add Your Key</h1>
            <p>Share your parish, school, retreat, pilgrimage, business, vocation, missionary, or campus ministry.</p>
        </section>

        <div class="join-steps">
            <div class="join-step-indicator" id="join-step-indicator">
                <button type="button" class="join-step-dot active" data-step="0">Sign In</button>
                <button type="button" class="join-step-dot" data-step="1">Add Key</button>
                <button type="button" class="join-step-dot" data-step="2">Subscribe</button>
                <button type="button" class="join-step-dot" data-step="3">Submit</button>
            </div>

            <!-- Step 1: Auth -->
            <section class="join-step" id="step-auth">
                <h2>Sign in to continue</h2>
                <div class="join-auth-buttons">
                    <button class="join-auth-btn" id="btn-email-phone">Continue with Email or Phone</button>
                    <button class="join-auth-btn join-auth-apple" id="btn-apple">
                        <span class="join-auth-icon"></span> Continue with Apple
                    </button>
                    <button class="join-auth-btn join-auth-google" id="btn-google">
                        <span class="join-auth-icon">G</span> Continue with Google
                    </button>
                </div>
                <div class="join-auth-form hidden" id="email-phone-form">
                    <div class="join-auth-row">
                        <input type="email" id="email-input" placeholder="Email address">
                        <button id="email-send-link">Send Link</button>
                    </div>
                    <div class="join-auth-row">
                        <input type="tel" id="phone-input" placeholder="+1 555 555 5555">
                        <button id="phone-send-code">Send Code</button>
                    </div>
                    <div class="join-auth-row hidden" id="phone-code-row">
                        <input type="text" id="phone-code-input" placeholder="SMS code">
                        <button id="phone-verify-code">Verify</button>
                    </div>
                    <div id="recaptcha-container"></div>
                    <div class="join-auth-note" id="auth-status"></div>
                </div>
            </section>

            <!-- Step 2: Key Type -->
            <section class="join-step hidden" id="step-type">
                <h2>Select a key type</h2>
                <div class="join-type-grid" id="key-type-grid">
                    <button class="join-type-card" data-type="church">Church</button>
                    <button class="join-type-card" data-type="business">Business</button>
                    <button class="join-type-card" data-type="school">School</button>
                    <button class="join-type-card" data-type="pilgrimage">Pilgrimage</button>
                    <button class="join-type-card" data-type="retreat">Retreat</button>
                    <button class="join-type-card" data-type="vocation">Vocation</button>
                    <button class="join-type-card" data-type="missionary">Missionary</button>
                    <button class="join-type-card" data-type="campus">Campus Ministry</button>
                </div>
                <button class="join-next" id="to-subscription" disabled>Continue</button>
            </section>

            <!-- Step 3: Subscription -->
            <section class="join-step hidden" id="step-subscription">
                <h2>Build your trial</h2>
                <div class="join-subscription-options">
                    <label class="join-sub-option">
                        <input type="radio" name="plan" value="trial" checked>
                        <span>Free — 1 month</span>
                    </label>
                    <label class="join-sub-option">
                        <input type="radio" name="plan" value="three_months">
                        <span>$9.99 — 3 months</span>
                    </label>
                </div>
                <div class="join-toggle">
                    <span>Remind me before my trial ends</span>
                    <label class="switch">
                        <input type="checkbox" id="trial-reminder" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="join-sub-note">Both plans start with a 30-day free trial. Cancel anytime.</p>
                <div id="subscription-status" class="join-form-note"></div>
                <button class="join-next" id="to-form">Continue</button>
            </section>

            <!-- Step 4: Submission Form -->
            <section class="join-step hidden" id="step-form">
                <h2>Submit your key</h2>
                <p class="join-form-hint">Fields marked with * are required.</p>
                <form id="join-form" class="join-form">
                    <div class="join-form-row">
                        <label>Key Type</label>
                        <input type="text" id="field-type-readonly" readonly>
                    </div>
                    <div class="join-form-row">
                        <label>Name *</label>
                        <input type="text" id="field-name" required>
                    </div>

                    <!-- Parish fields -->
                    <div class="join-form-group hidden" data-keytype="church">
                        <div class="join-form-row">
                            <label>Pastor Name *</label>
                            <input type="text" id="field-pastor-name" required>
                        </div>
                        <div class="join-form-grid">
                            <div class="join-form-row">
                                <label>Email *</label>
                                <input type="email" id="field-church-email" required>
                            </div>
                            <div class="join-form-row">
                                <label>Phone *</label>
                                <input type="tel" id="field-church-phone" required>
                            </div>
                        </div>
                        <div class="join-form-row">
                            <label>Address *</label>
                            <input type="text" id="field-church-address" required>
                        </div>
                        <div class="join-form-grid">
                            <div class="join-form-row">
                                <label>City *</label>
                                <input type="text" id="field-church-city" required>
                            </div>
                            <div class="join-form-row">
                                <label>State *</label>
                                <input type="text" id="field-church-state" required>
                            </div>
                            <div class="join-form-row">
                                <label>ZIP Code *</label>
                                <input type="text" id="field-church-zip" required>
                            </div>
                        </div>
                        <div class="join-geocode-result" id="geocode-church"></div>
                        <div class="join-form-row">
                            <label>Website</label>
                            <input type="url" id="field-church-website">
                        </div>
                        <div class="join-form-row">
                            <label>Description</label>
                            <textarea id="field-church-description" rows="3"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Member Count</label>
                            <input type="number" id="field-member-count" inputmode="numeric">
                        </div>
                        <div class="join-form-row">
                            <label>Mass Schedule</label>
                            <textarea id="field-mass-times" rows="2" placeholder="Sun 9am, 11am; Daily 7am"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Confession Schedule</label>
                            <textarea id="field-confession-times" rows="2"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Adoration Schedule</label>
                            <textarea id="field-adoration-times" rows="2"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Upcoming Events</label>
                            <textarea id="field-upcoming-events" rows="3"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Pastor PSAs</label>
                            <textarea id="field-pastor-psas" rows="3"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Prep Class Signup URL</label>
                            <input type="url" id="field-prep-class-url">
                        </div>
                    </div>

                    <!-- Business fields -->
                    <div class="join-form-group hidden" data-keytype="business">
                        <div class="join-form-row">
                            <label>Location *</label>
                            <input type="text" id="field-business-location" required placeholder="Address or city, state">
                            <div class="join-geocode-result" id="geocode-business"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Description *</label>
                            <textarea id="field-business-description" rows="3" required></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Founding Year *</label>
                            <input type="number" id="field-business-founding-year" required inputmode="numeric">
                        </div>
                    </div>

                    <!-- School fields -->
                    <div class="join-form-group hidden" data-keytype="school">
                        <div class="join-form-row">
                            <label>Location *</label>
                            <input type="text" id="field-school-location" required placeholder="Address or city, state">
                            <div class="join-geocode-result" id="geocode-school"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Description *</label>
                            <textarea id="field-school-description" rows="3" required></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Founding Year *</label>
                            <input type="number" id="field-school-founding-year" required inputmode="numeric">
                        </div>
                    </div>

                    <!-- Pilgrimage fields -->
                    <div class="join-form-group hidden" data-keytype="pilgrimage">
                        <div class="join-form-row">
                            <label>Location *</label>
                            <input type="text" id="field-pilgrimage-location" required placeholder="Address or city, state">
                            <div class="join-geocode-result" id="geocode-pilgrimage"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Description *</label>
                            <textarea id="field-pilgrimage-description" rows="3" required></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Founding Year *</label>
                            <input type="number" id="field-pilgrimage-founding-year" required inputmode="numeric">
                        </div>
                    </div>

                    <!-- Retreat fields -->
                    <div class="join-form-group hidden" data-keytype="retreat">
                        <div class="join-form-row">
                            <label>Location *</label>
                            <input type="text" id="field-retreat-location" required placeholder="Address or city, state">
                            <div class="join-geocode-result" id="geocode-retreat"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Description *</label>
                            <textarea id="field-retreat-description" rows="3" required></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Founding Year *</label>
                            <input type="number" id="field-retreat-founding-year" required inputmode="numeric">
                        </div>
                    </div>

                    <!-- Missionary fields -->
                    <div class="join-form-group hidden" data-keytype="missionary">
                        <div class="join-form-row">
                            <label>Introduction *</label>
                            <textarea id="field-missionary-intro" rows="3" required maxlength="300" placeholder="Brief introduction (300 char max)"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Parish Address *</label>
                            <input type="text" id="field-missionary-address" required placeholder="Where your dot appears on the map">
                            <div class="join-geocode-result" id="geocode-missionary"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Website *</label>
                            <input type="url" id="field-missionary-website" required>
                        </div>
                        <div class="join-form-row">
                            <label>Donation Link</label>
                            <input type="url" id="field-missionary-donation">
                        </div>
                        <div class="join-form-row">
                            <label>Contact Email</label>
                            <input type="email" id="field-missionary-email">
                        </div>
                    </div>

                    <!-- Vocation fields -->
                    <div class="join-form-group hidden" data-keytype="vocation">
                        <div class="join-form-row">
                            <label>Introduction *</label>
                            <textarea id="field-vocation-intro" rows="3" required maxlength="300" placeholder="Brief introduction (300 char max)"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Parish Address *</label>
                            <input type="text" id="field-vocation-address" required placeholder="Where your dot appears on the map">
                            <div class="join-geocode-result" id="geocode-vocation"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Website *</label>
                            <input type="url" id="field-vocation-website" required>
                        </div>
                        <div class="join-form-row">
                            <label>Contact Email</label>
                            <input type="email" id="field-vocation-email">
                        </div>
                    </div>

                    <!-- Campus Ministry fields -->
                    <div class="join-form-group hidden" data-keytype="campus">
                        <div class="join-form-row">
                            <label>Introduction *</label>
                            <textarea id="field-campus-intro" rows="3" required maxlength="300" placeholder="Brief introduction (300 char max)"></textarea>
                        </div>
                        <div class="join-form-row">
                            <label>Meeting Times *</label>
                            <input type="text" id="field-campus-meeting-times" required>
                        </div>
                        <div class="join-form-row">
                            <label>Parish Address *</label>
                            <input type="text" id="field-campus-address" required placeholder="Where your dot appears on the map">
                            <div class="join-geocode-result" id="geocode-campus"></div>
                        </div>
                        <div class="join-form-row">
                            <label>Contact Email</label>
                            <input type="email" id="field-campus-email">
                        </div>
                    </div>

                    <!-- Disclaimer: what you can add after submission -->
                    <div class="join-disclaimer" id="join-disclaimer">
                        <div class="join-disclaimer-icon">+</div>
                        <div class="join-disclaimer-body">
                            <p class="join-disclaimer-heading">You can add more after you submit</p>
                            <p class="join-disclaimer-text">Once your key is live, tap the <strong>+</strong> button on your key in the app to add:</p>
                            <ul class="join-disclaimer-list" id="disclaimer-list">
                                <!-- Parish -->
                                <li data-keytype="church">Gallery photos (altar, nave, architecture)</li>
                                <li data-keytype="church">Events &amp; upcoming gatherings</li>
                                <li data-keytype="church">Groups &amp; ministries</li>
                                <li data-keytype="church">Staff &amp; leadership</li>
                                <li data-keytype="church">Social media links</li>
                                <li data-keytype="church">Pastor PSAs &amp; announcements</li>
                                <!-- Business -->
                                <li data-keytype="business">Business hours</li>
                                <li data-keytype="business">Social media &amp; connect links</li>
                                <li data-keytype="business">Events</li>
                                <li data-keytype="business">Philanthropy &amp; community involvement</li>
                                <li data-keytype="business">Job openings</li>
                                <!-- School -->
                                <li data-keytype="school">Classical education details</li>
                                <li data-keytype="school">Academics (grade levels, tuition, admissions)</li>
                                <li data-keytype="school">Catholic formation (sacraments, catechesis)</li>
                                <!-- Pilgrimage -->
                                <li data-keytype="pilgrimage">New trip offerings</li>
                                <li data-keytype="pilgrimage">Photos &amp; gallery</li>
                                <!-- Retreat -->
                                <li data-keytype="retreat">Retreat details (topics, speakers, schedule, pricing)</li>
                                <li data-keytype="retreat">Spiritual life (Mass, confession, adoration)</li>
                                <li data-keytype="retreat">Organization info &amp; accommodations</li>
                                <li data-keytype="retreat">Marketing &amp; testimonials</li>
                                <!-- Missionary -->
                                <li data-keytype="missionary">Contact info &amp; Calendly link</li>
                                <li data-keytype="missionary">Impact statistics (students reached, campuses, years)</li>
                                <li data-keytype="missionary">Photos</li>
                                <!-- Vocation -->
                                <li data-keytype="vocation">Contact info &amp; application link</li>
                                <li data-keytype="vocation">Formation details &amp; requirements</li>
                                <li data-keytype="vocation">Director info</li>
                                <li data-keytype="vocation">Photos</li>
                                <!-- Campus Ministry -->
                                <li data-keytype="campus">Sacrament schedules (Mass, confession, adoration)</li>
                                <li data-keytype="campus">Events with sign-up links</li>
                                <li data-keytype="campus">Impact statistics</li>
                                <li data-keytype="campus">Staff directory</li>
                                <li data-keytype="campus">Outreach &amp; social media</li>
                            </ul>
                        </div>
                    </div>

                    <div class="join-form-row">
                        <button type="submit" class="join-submit">Submit</button>
                    </div>
                    <div class="join-form-note" id="submit-status"></div>
                </form>
            </section>

            <!-- Success -->
            <section class="join-step hidden" id="step-success">
                <h2>Submission received</h2>
                <p>Your key has been submitted and will appear after review.</p>
                <a href="map.html" class="join-next">Go to Map</a>
            </section>
        </div>
    </main>

    <script type="module" src="join.js"></script>
</body>
</html>
